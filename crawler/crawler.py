# -*- coding: UTF-8 -*-.
from bs4 import BeautifulSoup
import requests
import re

def get_page(url):
    url_req = requests.get(url)
    url_soup = BeautifulSoup(url_req.text, "lxml")
    return url_soup

base_url = "http://sourceforge.net"
url = 'http://sourceforge.net/directory/os:windows/?page='
count=0
for i in range(1,400):
    url_soup = get_page(url+str(i))
    for url_a in url_soup.findAll('a', {'itemprop':'url'}):
        # build software page from sourceforge
        item_url = base_url+url_a['href']
        # remove any ?source= from url
        regex = r"(\?source=)\w+.\w+"
        item_url = re.sub(regex, "", item_url)
        # build download page url
        download_url = item_url + "files/latest/download"
        print download_url
        # get download page
        download_soup = get_page(download_url)
        print download_soup
        for url_download in download_soup.findAll('a', {'class':'download-button'}):
            print url_download
        print
        # .replace("?source=directory-featured","files/latest/download?source=directory-featured")
        # print item_url
        # for item_a in url_soup.findAll('a', {'class':'sfdl'}):
            # print item_a['href']
        # print
        print
print count
